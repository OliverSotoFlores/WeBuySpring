<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Webuy | Product Manager</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css">

    <!-- Google icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" href="../css/global.css">
    <link rel="stylesheet" type="text/css" href="../css/view-css/adminProductList.css">
</head>

<body>
    <header th:insert="headerfooter :: header"> </header>
    <div th:insert="headerfooter :: admin-header"></div>
    <div class="admin-product-list">
        <section id="admin-header">
            <h1>Product Manager</h1>
            <section class="list-actions">
                <form action="" class="list-form">
                    <input type="text" name="category" placeholder="Sort by category" list="category-list">
                    <datalist id="category-list">
                        <option value="Electronics"></option>
                        <option value="Clothing"></option>
                        <option value="Kitchen"></option>
                    </datalist>
                    <input type="text" name="search-bar" class="search-input" placeholder="Search product..." />
                    <button type="submit" class="search-btn">
                        <span class="material-icons">
                            search
                        </span>
                    </button>

                </form>
                <a id="p-add" href="#" onclick="showAddModalAdminProducts();"><span
                        class="material-icons md-36 add-btn">add</span></a>
            </section>
        </section>

        <section class="list-container">

            <article class="product-item" th:each="product: ${listProducts}">
                <div class="product-actions">

                    <span id="p-delete" class="material-icons p-action"
                        onclick="confirm('Are you sure you want to delete this product?');">delete</span>
                    <span id="p-edit" th:product-name="${product.name}" th:product-company="${product.company}" th:product-price="${product.price}" th:product-description="${product.description}" th:product-id="${product.id}" th:onclick="editModalAdminProduct(this, this.getAttribute('product-id'), this.getAttribute('product-name'), this.getAttribute('product-description'), this.getAttribute('product-price'), this.getAttribute('product-company'))" class="material-icons p-action">edit</span>
                </div>
                <div class="product-img">
                    <img src="https://via.placeholder.com/150" alt="" />
                </div>

                <div class="product-wrapper">
                    <div class="product-info">
                        <strong id="p-price">$59.99</strong>
                        <p id="p-name" th:text="${product.name}">Product name</p>
                        <p th:text="${product.description}">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur non molestie lectus.
                            Phasellus fringilla eleifend
                            velit ut rhoncus.</p>
                        <p th:text="${product.company}" id="p-brand">Brand Name</p>
                    </div>
                </div>
            </article>

        </section>
        <div id="addModal" class="modal">
            <div class="modal-contents">
                <span class="material-icons close">close</span>
                <h3>Create New Product</h3>
                <form th:action="@{/admin/products/create}" method="post" th:object="${product}">
                    <label for="p-name">Name</label><br>
                    <input type="text" name="p-name" placeholder="Type product name here"><br>
                    <label for="p-category">Category</label><br>
                    <select name="categories-list">
                        <option disabled selected>Select product category</option>
                        <option value="electronics">Electronics</option>
                        <option value="clothing">Clothing</option>
                        <option value="kitchen">Kitchen</option>
                    </select><br>
                    <label for="company">Brand</label><br>
                    <input type="text" name="company" placeholder="Type product brand here"><br>
                    <label for="description">Description</label><br>
                    <textarea type="text" name="description" rows="3" cols="50"
                        placeholder="Type description here"></textarea><br>
                    <label for="price">Price</label><br>
                    <input type="number" name="price" placeholder="0" min="0" step=".01"><br>
                    <label for="image">Image</label><br>
                    <input type="file" name="image" accept="image/*"><br>
                    <button type="submit"><span class="material-icons">add_circle_outline</span> Create</button>
                </form>
            </div>
        </div>
        <div id="editModal" class="modal">
            <div class="modal-contents">
                <span class="material-icons close">close</span>
                <h3>Edit Product</h3>
                <form th:action="@{/admin/products/edit}" method="post" th:object="${product}">
                    <input type="hidden" id="id" name="id">
                    <label for="name">Name</label><br>
                    <input id="name" type="text" name="name" placeholder="Type product name here" value="Product name"><br>
                    <label for="category">Category</label><br>
                    <select name="category" th:field="*{categoryId}">
                        <option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}">Clothing</option>
                    </select><br>
                    <label for="company">Brand</label><br>
                    <input type="text" id="company" name="company" placeholder="Type product brand here" value="Brand Name"><br>
                    <label for="description">Description</label><br>
                    <textarea type="text" id="description" name="description" rows="3" cols="50"
                        placeholder="Type description here">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur non molestie lectus. Phasellus fringilla eleifend velit ut rhoncus.</textarea><br>
                    <label for="price">Price</label><br>
                    <input type="number" id="price" name="price" placeholder="0" min="0" step=".01" value="59.99"><br>
                    <label for="image">Image</label><br>
                    <input type="file" name="image" accept="image/*"><br>
                    <button type="submit" ><span class="material-icons">edit</span> Update</button>
                </form>
            </div>
        </div>
        <section id="pagination-wrapper">
            <nav aria-label="...">
                <ul class="pagination">
                    <li class="page-item" th:classappend="${!paginationData.hasPrevious()} ? disabled">
                        <a class="page-link"
                            th:href="@{/admin/products(size=${paginationData.pageSize}, page=${paginationData.currentPage-1})}"
                            tabindex="
                            -1">Previous</a>
                    </li>
                    <li th:each="i: ${#numbers.sequence(1, paginationData.totalPages )}" class="page-item"
                        th:classappend="${i==paginationData.currentPage} ? active">
                        <a class="page-link" th:text="${i}"
                            th:href="@{/admin/products(size=${paginationData.pageSize}, page=${i})}">a</a>
                    </li>
                    <li class="page-item" th:classappend="${!paginationData.hasNext()} ? disabled">
                        <a class="page-link"
                            th:href="@{/admin/products(size=${paginationData.pageSize}, page=${paginationData.currentPage+1})}">Next</a>
                    </li>
                </ul>
            </nav>
        </section>

    </div>
    <footer th:insert="headerfooter :: footer"> </footer>
    <!-- Modals script -->
    <script th:src="@{/js/view-js/showModals.js}"></script>
</body>

</html>